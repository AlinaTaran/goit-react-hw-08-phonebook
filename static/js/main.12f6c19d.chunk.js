(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{106:function(t,e,n){},107:function(t,e,n){"use strict";n.r(e);var r=n(2),c=n(0),a=n.n(c),u=n(21),s=n.n(u),o=n(17),i=n(10),l=n(49),d=n(6),b=n(11),j=n(27),h=n.n(j);var f=function(){var t=Object(i.c)(b.c.getIsLoggedIn);return Object(r.jsxs)("nav",{children:[Object(r.jsx)(o.b,{to:"/",exact:!0,className:h.a.link,activeClassName:h.a.activeLink,children:"Home"}),t&&Object(r.jsx)(o.b,{to:"/contacts",exact:!0,className:h.a.link,activeClassName:h.a.activeLink,children:"Contacts"})]})},O=n.p+"static/media/default-avatar.cc266fe1.png",p=n(32),g=n.n(p),v=n(121);function x(){var t=Object(i.b)(),e=Object(i.c)(b.c.getUsername);return Object(r.jsxs)("div",{className:g.a.container,children:[Object(r.jsx)("img",{src:O,alt:"Default Avatar",width:"32",className:g.a.avatar}),Object(r.jsxs)("span",{className:g.a.name,children:["Welcome, ",e]}),Object(r.jsx)(v.a,{type:"button",variant:"outlined",size:"small",onClick:function(){return t(b.a.logOut())},children:"Log out"})]})}var C=n(28),m=n.n(C);function k(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(o.b,{to:"/register",exact:!0,className:m.a.link,activeClassName:m.a.activeLink,children:"Sign up"}),Object(r.jsx)(o.b,{to:"/login",exact:!0,className:m.a.link,activeClassName:m.a.activeLink,children:"Log in"})]})}var _=n(50),y=n.n(_);function L(){var t=Object(i.c)(b.c.getIsLoggedIn);return Object(r.jsxs)("header",{className:y.a.header,children:[Object(r.jsx)(f,{}),t?Object(r.jsx)(x,{}):Object(r.jsx)(k,{})]})}var I=n(51),w=n.n(I),N=function(t){var e=t.children;return Object(r.jsx)("div",{className:w.a.Container,children:e})},S=n(52),U=n.n(S),z=(n(103),n(53)),A=n.n(z);var E=function(){return Object(r.jsx)("div",{className:A.a.wrapper,children:Object(r.jsx)(U.a,{type:"BallTriangle",color:"#8B008B",height:"40"})})},R=n(24),T=n(31);function F(t){t.isAuthenticated;var e=t.redirectTo,n=t.children,c=Object(T.a)(t,["isAuthenticated","redirectTo","children"]),a=Object(i.c)(b.c.getIsLoggedIn);return Object(r.jsx)(d.b,Object(R.a)(Object(R.a)({},c),{},{children:a?n:Object(r.jsx)(d.a,{to:e})}))}function q(t){t.isAuthenticated;var e=t.redirectTo,n=t.children,c=Object(T.a)(t,["isAuthenticated","redirectTo","children"]),a=Object(i.c)(b.c.getIsLoggedIn);return Object(r.jsx)(d.b,Object(R.a)(Object(R.a)({},c),{},{children:a&&c.restricted?Object(r.jsx)(d.a,{to:e}):n}))}var W=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,131))})),B=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,132))})),V=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,133))})),J=Object(c.lazy)((function(){return Promise.all([n.e(7),n.e(0)]).then(n.bind(null,130))}));function M(){var t=Object(i.b)();return Object(c.useEffect)((function(){t(b.a.fetchCurrentUser())}),[t]),Object(r.jsxs)(N,{children:[Object(r.jsx)(L,{}),Object(r.jsx)(c.Suspense,{fallback:Object(r.jsx)(E,{}),children:Object(r.jsxs)(d.d,{children:[Object(r.jsx)(q,{path:"/",exact:!0,children:Object(r.jsx)(W,{})}),Object(r.jsx)(q,{path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(r.jsx)(B,{})}),Object(r.jsx)(q,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(r.jsx)(V,{})}),Object(r.jsx)(F,{path:"/contacts",redirectTo:"/login",children:Object(r.jsx)(J,{})})]})})]})}var D=n(30),X=n(4),G=n(20),H=n(54),P=n.n(H),Q=n(38),Y=Object(D.a)(Object(X.f)({serializableCheck:{ignoredActions:[G.a,G.f,G.b,G.c,G.d,G.e]}})),Z={key:"auth",storage:P.a,whitelist:["token"]},K=Object(X.a)({reducer:{auth:Object(G.g)(Z,b.b),contacts:Q.a},middleware:Y,devTools:!1}),$=Object(G.h)(K);n(106);s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(i.a,{store:K,children:Object(r.jsx)(l.a,{loading:null,persistor:$,children:Object(r.jsx)(o.a,{children:Object(r.jsx)(M,{})})})})}),document.getElementById("root"))},11:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return p}));var r=n(19),c=n.n(r),a=n(25),u=n(22),s=n.n(u),o=n(4);s.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var i,l=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},d=function(){s.a.defaults.headers.common.Authorization=""},b=Object(o.c)("auth/register",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.post("/users/signup",e);case 4:return a=t.sent,u=a.data,l(u.token),t.abrupt("return",u);case 10:return t.prev=10,t.t0=t.catch(1),400===t.t0.response.status?alert("Creation error, please try again!"):500===t.t0.response.status?alert("Server error, please try later!"):alert("Whoops, something went wrong"),t.abrupt("return",r(t.t0));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),j=Object(o.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.post("/users/login",e);case 4:return a=t.sent,u=a.data,l(u.token),t.abrupt("return",u);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),h={register:b,logOut:Object(o.c)("auth/logout",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.post("/users/logout");case 4:d(),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),logIn:j,fetchCurrentUser:Object(o.c)("auth/refresh",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return l(a),t.prev=5,t.next=8,s.a.get("/users/current");case 8:return u=t.sent,o=u.data,t.abrupt("return",o);case 13:return t.prev=13,t.t0=t.catch(5),t.abrupt("return",n.rejectWithValue(t.t0));case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},f={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getIsFetchingCurrent:function(t){return t.auth.isFetchingCurrentUser}},O=n(5),p=Object(o.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(i={},Object(O.a)(i,h.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(O.a)(i,h.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(O.a)(i,h.logOut.fulfilled,(function(t){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(O.a)(i,h.fetchCurrentUser.pending,(function(t){t.isFetchingCurrentUser=!0})),Object(O.a)(i,h.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetchingCurrentUser=!1})),Object(O.a)(i,h.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrentUser=!1})),i)}).reducer},12:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchContactsRequest",(function(){return c})),n.d(e,"fetchContactsSuccess",(function(){return a})),n.d(e,"fetchContactsError",(function(){return u})),n.d(e,"addContactRequest",(function(){return s})),n.d(e,"addContactSuccess",(function(){return o})),n.d(e,"addContactError",(function(){return i})),n.d(e,"deleteContactRequest",(function(){return l})),n.d(e,"deleteContactSuccess",(function(){return d})),n.d(e,"deleteContactError",(function(){return b})),n.d(e,"changeFilter",(function(){return j}));var r=n(4),c=Object(r.b)("contacts/fetchContactsRequest"),a=Object(r.b)("contacts/fetchContactsSuccess"),u=Object(r.b)("contacts/fetchContactsError"),s=Object(r.b)("contacts/addContactRequest"),o=Object(r.b)("contacts/addContactSuccess"),i=Object(r.b)("contacts/addContactError"),l=Object(r.b)("contacts/deleteContactRequest"),d=Object(r.b)("contacts/deleteContactSuccess"),b=Object(r.b)("contacts/deleteContactError"),j=Object(r.b)("contacts/changeFilter")},27:function(t,e,n){t.exports={link:"Navigation_link__3XmXh",activeLink:"Navigation_activeLink___ZdhI"}},28:function(t,e,n){t.exports={link:"AuthNav_link__1bTWT",activeLink:"AuthNav_activeLink__2jJId"}},32:function(t,e,n){t.exports={container:"UzerMenu_container__1NAxQ",avatar:"UzerMenu_avatar__1J56G",name:"UzerMenu_name__1z2Lm"}},38:function(t,e,n){"use strict";var r,c,a=n(5),u=n(30),s=n(9),o=n(4),i=n(12),l=Object(o.d)([],(r={},Object(a.a)(r,i.fetchContactsSuccess,(function(t,e){return e.payload})),Object(a.a)(r,i.addContactSuccess,(function(t,e){var n=e.payload;return[].concat(Object(u.a)(t),[n])})),Object(a.a)(r,i.deleteContactSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),d=Object(o.d)(!1,(c={},Object(a.a)(c,i.fetchContactsRequest,(function(){return!0})),Object(a.a)(c,i.fetchContactsSuccess,(function(){return!1})),Object(a.a)(c,i.fetchContactsError,(function(){return!1})),Object(a.a)(c,i.addContactRequest,(function(){return!0})),Object(a.a)(c,i.addContactSuccess,(function(){return!1})),Object(a.a)(c,i.addContactError,(function(){return!1})),Object(a.a)(c,i.deleteContactRequest,(function(){return!0})),Object(a.a)(c,i.deleteContactSuccess,(function(){return!1})),Object(a.a)(c,i.deleteContactError,(function(){return!1})),c)),b=Object(o.d)("",Object(a.a)({},i.changeFilter,(function(t,e){return e.payload})));e.a=Object(s.c)({items:l,filter:b,loading:d})},50:function(t,e,n){t.exports={header:"AppBar_header__1z1bY"}},51:function(t,e,n){t.exports={Container:"Container_Container__3te6y"}},53:function(t,e,n){t.exports={wrapper:"LoaderSpinner_wrapper__B6DF1"}}},[[107,5,6]]]);
//# sourceMappingURL=main.12f6c19d.chunk.js.map